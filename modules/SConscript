Import('env')

# modules must be listed after modules that use them
modules=['cgal',
         'algebra',
         'core',
         'container',
         'atom',
         'statistics',
         'display',
         'domino',
         'em',
         'example',
         'saxs',
         'gsl',
         'modeller',
         'restrainer',
         'em2d',
         'multifit',
         'bullet',
         'openmm',
         'misc']
# always last
modules.append('benchmark')

disabled=env.get('disabledmodules', '').split(":")

if env.get('local', False):
    for d in Glob("*/SConscript"):
        p= str(d).split("/")[0]
        if not p in modules:
            modules.append(p)

for p in modules:
    if p in disabled:
        env[p+"_ok"]=False
        env[p+"_required_modules"]=[]
    else:
        SConscript(p+"/SConscript")
