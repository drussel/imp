Import('env')

# the matrix D code is kind of a mess
matrix_function_name_exceptions=['Matrix2D.almost_equal', 'Matrix2D.centered_start', 'Matrix2D.compute_avg', 'Matrix2D.compute_max', 'Matrix2D.compute_min', 'Matrix2D.compute_stats', 'Matrix2D.compute_stddev', 'Matrix2D.copy', 'Matrix2D.cross_correlation_coefficient', 'Matrix2D.det', 'Matrix2D.fill_with_value', 'Matrix2D.first_element', 'Matrix2D.init_zeros', 'Matrix2D.is_square', 'Matrix2D.is_void', 'Matrix2D.normalize', 'Matrix2D.pad', 'Matrix2D.physical_get', 'Matrix2D.physical_set', 'Matrix2D.print_shape', 'Matrix2D.resize', 'Matrix2D.squared_difference', 'Matrix2D.sum_elements', 'Matrix2D.sum_squared_elements', 'Matrix2D.transpose', 'Matrix2D_f.almost_equal', 'Matrix2D_f.centered_start', 'Matrix2D_f.compute_avg', 'Matrix2D_f.compute_max', 'Matrix2D_f.compute_min', 'Matrix2D_f.compute_stats', 'Matrix2D_f.compute_stddev', 'Matrix2D_f.copy', 'Matrix2D_f.cross_correlation_coefficient', 'Matrix2D_f.det', 'Matrix2D_f.fill_with_value', 'Matrix2D_f.first_element', 'Matrix2D_f.init_zeros', 'Matrix2D_f.is_square', 'Matrix2D_f.is_void', 'Matrix2D_f.normalize', 'Matrix2D_f.pad', 'Matrix2D_f.physical_get', 'Matrix2D_f.physical_set', 'Matrix2D_f.print_shape', 'Matrix2D_f.resize', 'Matrix2D_f.squared_difference', 'Matrix2D_f.sum_elements', 'Matrix2D_f.sum_squared_elements', 'Matrix2D_f.transpose', 'Matrix3D.almost_equal', 'Matrix3D.centered_start', 'Matrix3D.compute_avg', 'Matrix3D.compute_max', 'Matrix3D.compute_min', 'Matrix3D.compute_stats', 'Matrix3D.compute_stddev', 'Matrix3D.copy', 'Matrix3D.cross_correlation_coefficient', 'Matrix3D.fill_with_value', 'Matrix3D.first_element', 'Matrix3D.init_zeros', 'Matrix3D.is_void', 'Matrix3D.normalize', 'Matrix3D.pad', 'Matrix3D.print_shape', 'Matrix3D.resize', 'Matrix3D.squared_difference', 'Matrix3D.sum_elements', 'Matrix3D.sum_squared_elements', 'Matrix3D_f.almost_equal', 'Matrix3D_f.centered_start', 'Matrix3D_f.compute_avg', 'Matrix3D_f.compute_max', 'Matrix3D_f.compute_min', 'Matrix3D_f.compute_stats', 'Matrix3D_f.compute_stddev', 'Matrix3D_f.copy', 'Matrix3D_f.cross_correlation_coefficient', 'Matrix3D_f.fill_with_value', 'Matrix3D_f.first_element', 'Matrix3D_f.init_zeros', 'Matrix3D_f.is_void', 'Matrix3D_f.normalize', 'Matrix3D_f.pad', 'Matrix3D_f.print_shape', 'Matrix3D_f.resize', 'Matrix3D_f.squared_difference', 'Matrix3D_f.sum_elements', 'Matrix3D_f.sum_squared_elements', 'MultiArray2D_f.almost_equal', 'MultiArray2D_f.centered_start', 'MultiArray2D_f.compute_avg', 'MultiArray2D_f.compute_max', 'MultiArray2D_f.compute_min', 'MultiArray2D_f.compute_stats', 'MultiArray2D_f.compute_stddev', 'MultiArray2D_f.copy', 'MultiArray2D_f.cross_correlation_coefficient', 'MultiArray2D_f.fill_with_value', 'MultiArray2D_f.first_element', 'MultiArray2D_f.init_zeros', 'MultiArray2D_f.is_void', 'MultiArray2D_f.normalize', 'MultiArray2D_f.print_shape', 'MultiArray2D_f.squared_difference', 'MultiArray2D_f.sum_elements', 'MultiArray2D_f.sum_squared_elements', 'MultiArray3D.almost_equal', 'MultiArray3D.centered_start', 'MultiArray3D.compute_avg', 'MultiArray3D.compute_max', 'MultiArray3D.compute_min', 'MultiArray3D.compute_stats', 'MultiArray3D.compute_stddev', 'MultiArray3D.copy', 'MultiArray3D.cross_correlation_coefficient', 'MultiArray3D.fill_with_value', 'MultiArray3D.first_element', 'MultiArray3D.init_zeros', 'MultiArray3D.is_void', 'MultiArray3D.normalize', 'MultiArray3D.print_shape', 'MultiArray3D.squared_difference', 'MultiArray3D.sum_elements', 'MultiArray3D.sum_squared_elements', 'MultiArray3D_f.almost_equal', 'MultiArray3D_f.centered_start', 'MultiArray3D_f.compute_avg', 'MultiArray3D_f.compute_max', 'MultiArray3D_f.compute_min', 'MultiArray3D_f.compute_stats', 'MultiArray3D_f.compute_stddev', 'MultiArray3D_f.copy', 'MultiArray3D_f.cross_correlation_coefficient', 'MultiArray3D_f.fill_with_value', 'MultiArray3D_f.first_element', 'MultiArray3D_f.init_zeros', 'MultiArray3D_f.is_void', 'MultiArray3D_f.normalize', 'MultiArray3D_f.print_shape', 'MultiArray3D_f.squared_difference', 'MultiArray3D_f.sum_elements', 'MultiArray3D_f.sum_squared_elements', 'PrincipalComponentAnalysis.is_initialized']

env.IMPModuleTest(python_tests= env.IMPModuleGetPythonTests(),
                  cpp_tests= env.IMPModuleGetCPPTests(),
                  plural_exceptions=['FixedXYZ', 'FixedZYZ', 'Matrix2D', 'Matrix3D',
                                     'MultiArray3D', 'NearestNeighbor2D', 'NearestNeighbor3D',
                                     'NearestNeighbor4D', 'ParabolicFit', 'BoundingBox2D',
                                     'BoundingBox3D', 'BoundingBox4D','BoundedGridStorage3D',
                                     'DenseDoubleGrid3D', 'DenseFloatGrid3D', 'SparseIntGrid3D',
                                     'SparseUnboundedIntGrid3D', 'UnboundedGridStorage3D',
                                     'AxisAnglePair'],
                  show_exceptions=[
                      # too complicated to fix
                      'Matrix3D', 'MultiArray3D',
                      # just used as a template parameter
                      'BoundedGridStorage3D'],
                  function_name_exceptions=['compose', 'reversed_read', 'reversed_write']+\
                  matrix_function_name_exceptions,
                  class_name_exceptions=['Matrix3D_f', 'Matrix2D_f'],
                  value_object_exceptions=['DenseDoubleGrid3D',
                                           'DenseFloatGrid3D', 'SparseIntGrid3D',
                                           'SparseUnboundedIntGrid3D',
                                           'AxisAnglePair'])
