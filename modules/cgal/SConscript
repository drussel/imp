Import('env')
import scons_tools.gcc

if scons_tools.gcc.get_is_gcc(env):
    cxxflags=['-fno-finite-math-only',
              '-ftrapping-math',
              '-fsignaling-nans',
              '-fno-float-store',
              '-frounding-math',
              '-fno-strict-aliasing',
              #ensure it can be run in valgrind
              '-DCGAL_DISABLE_ROUNDING_MATH_CHECK']
    if env['build']!= 'debug':
        cxxflag=cxxflags+['-O1', '-DNDEBUG']
    if scons_tools.gcc.get_version(env)>= 4.3:
        cxxflags=cxxflags+['-fsigned-zeros',
                           '-fno-reciprocal-math',
                           '-fno-associative-math']
else:
    cxxflags=[]
env.IMPModuleBuild(version='SVN',
                   required_dependencies=["CGAL"],
                   cxxflags=cxxflags)
