Import('env')
import scons_tools.dependency
import scons_tools.dependency.boost
import scons_tools.dependency.gcc

scons_tools.dependency.boost.configure_tr1_check(env)
deplist=[]

scons_tools.dependency.boost.add_boost_library(env, "FileSystem", "filesystem",
                                               'boost/filesystem/path.hpp',
                                               body="boost::filesystem::path p;",
                                               extra_boost_libs=["system"])
deplist.append('Boost.FileSystem')

config=[]
if scons_tools.dependency.gcc.get_is_gcc_like(env) and scons_tools.dependency.gcc.get_version(env)< 4.2:
    # partial specialization bug, and the optimizer sucks
    config.append("IMP_OLD_GCC")


env.IMPModuleBuild(version='nightly-7/5/2012',
                   lib_only_required_modules=['compatibility'],
                   optional_dependencies=deplist,
                   config_macros=config)
