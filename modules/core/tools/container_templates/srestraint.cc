/**
 *  \file GroupnameRestraint.cpp
 *  \brief Implementation
 *
 *  This file is generated by a script (core/tools/make-container).
 *  Do not edit directly.
 *
 *  Copyright 2007-9 Sali Lab. All rights reserved.
 *
 */

#include "IMP/core/GroupnameRestraint.h"
#include <IMP/internal/container_helpers.h>

#include <IMP/log.h>


IMPCORE_BEGIN_NAMESPACE

namespace {
  typedef IMP::internal::ContainerTraits<Classname> Traits;
}

GroupnameRestraint
::GroupnameRestraint(GroupnameScore *ss,
                     ClassnameArguments,
                     std::string name):
  Restraint(name),
  ss_(ss),
  v_(FromClassnameArguments),
  score_(std::numeric_limits<double>::quiet_NaN())
{
}

double GroupnameRestraint
::unprotected_evaluate(DerivativeAccumulator *accum) const
{
  IMP_OBJECT_LOG;
  IMP_CHECK_OBJECT(ss_);
  score_ = Traits::evaluate(ss_, v_, accum);

  return score_;
}

double GroupnameRestraint
::unprotected_incremental_evaluate(DerivativeAccumulator *accum) const
{
  if (IMP::internal::ContainerTraits<Classname>::is_dirty(v_)) {
    score_+=Traits::evaluate_change(ss_, v_, accum);
  }
  return score_;
}

ParticlesList GroupnameRestraint::get_interacting_particles() const
{
  return IMP::internal::get_interacting_particles(v_, ss_.get());
}

ParticlesTemp GroupnameRestraint::get_input_particles() const
{
  return IMP::internal::get_input_particles(v_, ss_.get());
}

ObjectsTemp GroupnameRestraint::get_input_objects() const
{
  return ObjectsTemp();
}

void GroupnameRestraint::show(std::ostream& out) const
{
  out << "GroupnameRestraint with score function ";
  ss_->show(out);
  out << " and " << v_;
  out << std::endl;
}

IMPCORE_END_NAMESPACE
