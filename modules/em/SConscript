from tools import embed

Import('env')
Export('env')

# Modify our environment for building against EMBED:
embed.configure_check(env)

# Make sure that all builds with this environment fail if EMBED was not found:
if env['EM_LIBS'] == '' or env['MODELLER_LIBS'] == '':
    env.invalidate(embed.fail)

# Subdirectories:
lib = SConscript('src/SConscript')
SConscript('include/SConscript')
pyext = SConscript('pyext/SConscript')
test = SConscript('test/SConscript')
env.Depends(test, [pyext, lib])

Return('lib')
