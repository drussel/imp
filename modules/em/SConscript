Import('env')
Export('env')

env.IMPModuleAbout(author='Keren Lasker, Friedrich Foerster', version='SVN',
                   description='Handling of EM density maps.')

def modeller_fail(env, target, source):
    print """
  ERROR: Modeller is required to build %s.

  Use the modeller command line option (or options file) to set the
  directory where Modeller is installed (run 'scons -h' for help.)
""" % target[0]
    return 1

# Make sure that builds with this environment fail if MODELLER was not found:
if env['MODELLER_LIBS'] == '':
    env.invalidate(modeller_fail)
else:
    env.validate()

env.Append(LIBS=['imp_core', 'imp_atom','imp_algebra'])

# _USE_MATH_DEFINES is needed to get math.h to define M_LN2 under w32
env.Append(CPPDEFINES='_USE_MATH_DEFINES')

# Subdirectories:
SConscript('src/SConscript')
SConscript('include/SConscript')
SConscript('pyext/SConscript')
SConscript('test/SConscript')
