Import('env', 'get_sharedlib_environment')

# Get an environment suitable for building a shared library:
env = get_sharedlib_environment(env, 'IMP_EXPORTS', cplusplus=True)

# Source files
files = ('Score_Func.cpp', 'Model.cpp', 'Model_Data.cpp', 'Optimizer.cpp',
         'Particle.cpp', 'Restraint_Set.cpp', 'Restraint.cpp',
         'Complexes_Restraints.cpp', 'Rigid_Body.cpp', 'log.cpp',
         'emfile.cpp', 'emscore.cpp', 'Steepest_Descent.cpp',
         'Conjugate_Gradients.cpp')

# Build the shared library:
lib = env.SharedLibrary('imp', files)

# Install the library:
libinst = env.Install(env['libdir'], lib)
env.Alias('install', [libinst])

# Subdirectories:
SConscript('tests/SConscript')

Return('lib')
