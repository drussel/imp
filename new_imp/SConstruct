# Include IMP build utility functions:
execfile('../SCons.include')

# Get Modeller location, and set up a build environment:
modconfig = get_modeller_config()
env = MyEnvironment(modconfig, tools=["default", "doxygen"],
                    toolpath=["../tools"])

# Make these objects available to SConscript files:
Export('env', 'modconfig', 'get_pyext_environment', 'get_sharedlib_environment')

# Subdirectories to build:
bin = SConscript('bin/SConscript')
Export('bin')
src, pyext = SConscript('IMP/SConscript')
SConscript('IMP_mov/SConscript')
SConscript('doc/SConscript')

# bin script first requires libraries to be built:
env.Depends(bin, [src, pyext])

# Build the binaries by default:
env.Default(bin)
