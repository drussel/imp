<pre><font face="Lucida,Courier New"><font color="#000000">m</font><font color="#0000C0">=</font> <font color="#000000">IMP</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">Model</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<font color="#000000">particles</font> <font color="#0000C0">=</font> <font color="#000000">setup_model</font><font color="#0000C0">(</font><font color="#000000">m</font><font color="#0000C0">)</font>
<font color="#000000">fname</font><font color="#0000C0">=</font> <font color="#004080">"/tmp/best_scoring_config.yaml"</font>
<font color="#000000">best_score</font><font color="#0000C0">=</font><font color="#0080C0">1000000</font>
<font color="#000000">o</font><font color="#0000C0">=</font> <font color="#000000">IMP</font><font color="#0000C0">.</font><font color="#000000">ConjugateGradients</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<font color="#000000">o</font><font color="#0000C0">.</font><font color="#000000">set_model</font><font color="#0000C0">(</font><font color="#000000">m</font><font color="#0000C0">)</font>
<font color="#C00000">for</font> <font color="#000000">i</font> <font color="#C00000">in</font> <font color="#000000">range</font><font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">,</font><font color="#0080C0">1000</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">randomize</font><font color="#0000C0">(</font><font color="#000000">particles</font><font color="#0000C0">)</font>
    <font color="#000000">score</font><font color="#0000C0">=</font><font color="#000000">o</font><font color="#0000C0">.</font><font color="#000000">optimize</font><font color="#0000C0">(</font><font color="#0080C0">1000</font><font color="#0000C0">)</font>
    <font color="#C00000">if</font> <font color="#000000">score</font> <font color="#0000C0">&lt;</font> <font color="#000000">best_score</font><font color="#0000C0">:</font>
        <font color="#000000">IMP</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">core</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">write_yaml</font><font color="#0000C0">(</font><font color="#000000">m</font><font color="#0000C0">,</font> <font color="#000000">fname</font><font color="#0000C0">)</font>
        <font color="#000000">best_score</font><font color="#0000C0">=</font> <font color="#000000">score</font>
<font color="#000000">IMP</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">core</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">read</font><font color="#0000C0">(</font><font color="#000000">fname</font><font color="#0000C0">,</font> <font color="#000000">m</font><font color="#0000C0">)</font><font color="#000000"></font></font></pre>