<pre><font face="Lucida,Courier New"><font color="#0000C0">/</font><font color="#0000C0">**</font>
 <font color="#0000C0">*</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">\</font><font color="#000000">file</font> <font color="#000000">MyDecorator</font><font color="#0000C0">.</font><font color="#000000">h</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">\</font><font color="#000000">brief</font> <font color="#000000">Add</font> <font color="#000000">a</font> <font color="#000000">name</font> <font color="#000000">to</font> <font color="#000000">a</font> <font color="#000000">particle</font><font color="#0000C0">.</font>
 <font color="#0000C0">*</font>
 <font color="#0000C0">*</font>  <font color="#000000">Copyright</font> <font color="#0080C0">2007</font><font color="#0000C0">-</font><font color="#0080C0">8</font> <font color="#000000">Sali</font> <font color="#000000">Lab</font><font color="#0000C0">.</font> <font color="#000000">All</font> <font color="#000000">rights</font> <font color="#000000">reserved</font><font color="#0000C0">.</font>
 <font color="#0000C0">*</font>
 <font color="#0000C0">*</font><font color="#0000C0">/</font>

<font color="#008000">#ifndef IMPMODULENAME_MY_DECORATOR_H
</font><font color="#008000">#define IMPMODULENAME_MY_DECORATOR_H
</font>
<font color="#008000">#include "config.h"
</font>
<font color="#008000">#include &lt;IMP/Particle.h&gt;
</font><font color="#008000">#include &lt;IMP/Model.h&gt;
</font><font color="#008000">#include &lt;IMP/DecoratorBase.h&gt;
</font>
<font color="#000000">IMPMODULENAME_BEGIN_NAMESPACE</font>

<font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">A</font> <font color="#000000">simple</font> <font color="#000000">decorator</font> <font color="#000000">which</font> <font color="#000000">adds</font> <font color="#000000">a</font> <font color="#000000">name</font> <font color="#000000">to</font> <font color="#000000">a</font> <font color="#000000">particle</font><font color="#0000C0">.</font>
<font color="#0000C0">/</font><font color="#0000C0">**</font> <font color="#0000C0">*</font><font color="#0000C0">/</font>
<font color="#C00000">class</font> <font color="#000000">IMPCOREEXPORT</font> <font color="#000000">MyDecorator</font><font color="#0000C0">:</font> <font color="#000000">public</font> <font color="#000000">DecoratorBase</font>
<font color="#0000C0">{</font>
  <font color="#000000">static</font> <font color="#000000">StringKey</font> <font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">;</font>

<font color="#000000">public</font><font color="#0000C0">:</font>
  <font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">Create</font> <font color="#000000">a</font> <font color="#000000">decorator</font> <font color="#C00000">from</font> <font color="#000000">a</font> <font color="#000000">named</font> <font color="#000000">particle</font> <font color="#000000">without</font> <font color="#000000">error</font> <font color="#000000">checking</font><font color="#0000C0">.</font>
  <font color="#000000">MyDecorator</font><font color="#0000C0">(</font><font color="#000000">Particle</font> <font color="#0000C0">*</font><font color="#000000">p</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
  <font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">Create</font> <font color="#000000">a</font> <font color="#000000">decorator</font> <font color="#C00000">from</font> <font color="#000000">a</font> <font color="#000000">named</font> <font color="#000000">particle</font>
  <font color="#000000">static</font> <font color="#000000">MyDecorator</font> <font color="#000000">cast</font><font color="#0000C0">(</font><font color="#000000">Particle</font> <font color="#0000C0">*</font><font color="#000000">p</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
    <font color="#000000">IMP_assert</font><font color="#0000C0">(</font> <font color="#000000">p</font><font color="#0000C0">-</font><font color="#0000C0">&gt;</font><font color="#000000">has_attribute</font><font color="#0000C0">(</font><font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#004080">"Particle "</font> <font color="#0000C0">&lt;&lt;</font> <font color="#000000">p</font><font color="#0000C0">-</font><font color="#0000C0">&gt;</font><font color="#000000">get_index</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
               <font color="#0000C0">&lt;&lt;</font> <font color="#004080">" missing required attributes."</font><font color="#0000C0">,</font>
               <font color="#000000">InvalidStateException</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
    <font color="#C00000">return</font> <font color="#000000">MyDecorator</font><font color="#0000C0">(</font><font color="#000000">p</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
  <font color="#0000C0">}</font>

  <font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">Add</font> <font color="#000000">a</font> <font color="#000000">name</font> <font color="#000000">to</font> <font color="#000000">the</font> <font color="#000000">particle</font>
  <font color="#000000">static</font> <font color="#000000">MyDecorator</font> <font color="#000000">create</font><font color="#0000C0">(</font><font color="#000000">Particle</font> <font color="#0000C0">*</font><font color="#000000">p</font><font color="#0000C0">,</font> <font color="#000000">std</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">string</font> <font color="#000000">name</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
    <font color="#000000">p</font><font color="#0000C0">-</font><font color="#0000C0">&gt;</font><font color="#000000">add_attribute</font><font color="#0000C0">(</font><font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#000000">name</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
    <font color="#000000">MyDecorator</font> <font color="#000000">ret</font><font color="#0000C0">(</font><font color="#000000">p</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
    <font color="#C00000">return</font> <font color="#000000">ret</font><font color="#0000C0">;</font>
  <font color="#0000C0">}</font>

  <font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">Set</font> <font color="#000000">the</font> <font color="#000000">name</font> <font color="#000000">of</font> <font color="#000000">the</font> <font color="#000000">particle</font>
  <font color="#000000">void</font> <font color="#000000">set_name</font><font color="#0000C0">(</font><font color="#000000">std</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">string</font> <font color="#000000">name</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
    <font color="#000000">get_particle</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">-</font><font color="#0000C0">&gt;</font><font color="#000000">set_attribute</font><font color="#0000C0">(</font><font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#000000">name</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
  <font color="#0000C0">}</font>

  <font color="#0000C0">//</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">!</font> <font color="#000000">Get</font> <font color="#000000">the</font> <font color="#000000">name</font> <font color="#000000">of</font> <font color="#000000">the</font> <font color="#000000">particle</font>
  <font color="#000000">void</font> <font color="#000000">get_name</font><font color="#0000C0">(</font><font color="#000000">std</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">string</font> <font color="#000000">name</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
    <font color="#000000">get_particle</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">-</font><font color="#0000C0">&gt;</font><font color="#000000">get_attribute</font><font color="#0000C0">(</font><font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
  <font color="#0000C0">}</font>

  <font color="#0000C0">//</font> <font color="#000000">Print</font> <font color="#000000">out</font> <font color="#000000">information</font> <font color="#000000">about</font> <font color="#000000">the</font> <font color="#000000">particle</font>
  <font color="#000000">void</font> <font color="#000000">show</font><font color="#0000C0">(</font><font color="#000000">std</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">ostream</font> <font color="#0000C0">&amp;</font><font color="#000000">out</font><font color="#0000C0">)</font> <font color="#000000">const</font> <font color="#0000C0">{</font>
    <font color="#000000">out</font> <font color="#0000C0">&lt;&lt;</font> <font color="#004080">"Particle named "</font> <font color="#0000C0">&lt;&lt;</font> <font color="#000000">get_name</font><font color="#0000C0">(</font><font color="#0000C0">)</font> <font color="#0000C0">&lt;&lt;</font> <font color="#000000">std</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">endl</font><font color="#0000C0">;</font>
  <font color="#0000C0">}</font>
<font color="#0000C0">}</font><font color="#0000C0">;</font>

<font color="#0000C0">//</font> <font color="#000000">Make</font> <font color="#000000">it</font> <font color="#000000">so</font> <font color="#000000">the</font> <font color="#000000">C</font><font color="#0000C0">+</font><font color="#0000C0">+</font> <font color="#000000">operator</font><font color="#0000C0">&lt;&lt;</font> <font color="#000000">can</font> <font color="#000000">be</font> <font color="#000000">used</font><font color="#0000C0">.</font>
<font color="#000000">IMP_OUTPUT_OPERATOR</font><font color="#0000C0">(</font><font color="#000000">MyDecorator</font><font color="#0000C0">)</font><font color="#0000C0">;</font>

<font color="#000000">IMPMODULENAME_END_NAMESPACE</font>

<font color="#008000">#endif  /* IMPMODULENAME_MY_DECORATOR_H */
</font>

<font color="#0000C0">/</font><font color="#0000C0">**</font>
 <font color="#0000C0">*</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">\</font><font color="#000000">file</font> <font color="#000000">MyDecorator</font><font color="#0000C0">.</font><font color="#000000">cpp</font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;"> </font><font color="#FF8080" style="border: solid 1.5pt #FF0000;">\</font><font color="#000000">brief</font> <font color="#000000">Add</font> <font color="#000000">a</font> <font color="#000000">name</font> <font color="#000000">to</font> <font color="#000000">a</font> <font color="#000000">particle</font><font color="#0000C0">.</font>
 <font color="#0000C0">*</font>
 <font color="#0000C0">*</font>  <font color="#000000">Copyright</font> <font color="#0080C0">2007</font><font color="#0000C0">-</font><font color="#0080C0">8</font> <font color="#000000">Sali</font> <font color="#000000">Lab</font><font color="#0000C0">.</font> <font color="#000000">All</font> <font color="#000000">rights</font> <font color="#000000">reserved</font><font color="#0000C0">.</font>
 <font color="#0000C0">*</font>
 <font color="#0000C0">*</font><font color="#0000C0">/</font>

<font color="#008000">#include &lt;IMP/modulename/MyDecorator.h&gt;
</font>
<font color="#000000">IMPCORE_BEGIN_NAMESPACE</font>

<font color="#000000">MyDecorator</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">MyDecorator</font><font color="#0000C0">(</font><font color="#000000">Particle</font> <font color="#0000C0">*</font><font color="#000000">p</font><font color="#0000C0">)</font><font color="#0000C0">:</font> <font color="#000000">DecoratorBase</font><font color="#0000C0">(</font><font color="#000000">p</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
<font color="#0000C0">}</font>

<font color="#000000">StringKey</font> <font color="#000000">MyDecorator</font><font color="#0000C0">:</font><font color="#0000C0">:</font><font color="#000000">get_name_key</font><font color="#0000C0">(</font><font color="#0000C0">)</font> <font color="#0000C0">{</font>
  <font color="#0000C0">/</font><font color="#0000C0">*</font> <font color="#000000">the</font> <font color="#000000">compiler</font> <font color="#000000">will</font> <font color="#000000">make</font> <font color="#000000">sure</font> <font color="#000000">this</font> <font color="#C00000">is</font> <font color="#000000">initialized</font> <font color="#000000">the</font> <font color="#000000">first</font> <font color="#000000">time</font> <font color="#000000">the</font>
   <font color="#000000">method</font> <font color="#C00000">is</font> <font color="#000000">called</font><font color="#0000C0">.</font> <font color="#0000C0">*</font><font color="#0000C0">/</font>
  <font color="#000000">static</font> <font color="#000000">StringKey</font> <font color="#000000">mykey</font><font color="#0000C0">(</font><font color="#004080">"my name"</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
  <font color="#C00000">return</font> <font color="#000000">mykey</font><font color="#0000C0">;</font>
<font color="#0000C0">}</font>

<font color="#000000">IMPCORE_END_NAMESPACE</font><font color="#000000"></font></font></pre>