/**
 *  \file DistributeCLASSNAMEsScoreState.h
 *  \brief Apply a CLASSNAMEScore to each CLASSNAME in a list.
 *
 *  This file is generated by a script (core/tools/make-container).
 *  Do not edit directly.
 *
 *  Copyright 2007-2012 IMP Inventors. All rights reserved.
 *
 */

#ifndef IMPCONTAINER_DISTRIBUTE_HEADERNAMES_SCORE_STATE_H
#define IMPCONTAINER_DISTRIBUTE_HEADERNAMES_SCORE_STATE_H

#include "container_config.h"

#include <IMP/core/internal/CoreCLASSNAMEsRestraint.h>
#include "ListCLASSNAMEContainer.h"
#include <IMP/CLASSNAMEPredicate.h>
#include <IMP/CLASSNAMEContainer.h>
#include <boost/tuple/tuple.hpp>

#include <iostream>

IMPCONTAINER_BEGIN_NAMESPACE

//! Distribute contents of one container into several based on predicates
/** This ScoreState takes a list of containers, predicates and values. For
    each tuple in the input container, it is placed in a given output container
    if the predicate, when applied, has the passed value. */
class IMPCONTAINEREXPORT DistributeCLASSNAMEsScoreState :
public ScoreState
{
  OwnerPointer<CLASSNAMEContainer> input_;
  typedef boost::tuple<Pointer<ListCLASSNAMEContainer>,
    Pointer<CLASSNAMEPredicate>, int> Data;
  vector<Data> data_;
  mutable bool updated_;
  void update_lists_if_necessary() const;
public:
  DistributeCLASSNAMEsScoreState(CLASSNAMEContainer *input,
                      std::string name="DistributeCLASSNAMEsScoreState %1%");

  /** A given tuple will go into the cointainer \c output if \c predicate
      returns \c value when applied to it.*/
  void add_container(ListCLASSNAMEContainer *output,
                     CLASSNAMEPredicate *predicate,
                     int value) {
    data_.push_back(Data(output, predicate, value));
  }
  IMP_SCORE_STATE(DistributeCLASSNAMEsScoreState);
};

IMPCONTAINER_END_NAMESPACE

#endif  /* IMPCONTAINER_DISTRIBUTE_HEADERNAMES_SCORE_STATE_H */
